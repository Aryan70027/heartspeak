<!DOCTYPE html>
<html>

<head>
    <meta charset='UTF-8' />
    <meta content='width=device-width, initial-scale=1, user-scalable=1, minimum-scale=1, maximum-scale=5'
        name='viewport' />
    <meta content='IE=edge' http-equiv='X-UA-Compatible' />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Shippori+Antique:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.all.min.js"></script>
    <script src="https://unpkg.com/typeit@8.7.0/dist/index.umd.js"></script>
    <script src="https://kit.fontawesome.com/4f3ce16e3e.js" crossorigin="anonymous"></script>
    <title>Happy Birthday - HeartSpeak</title>
    <meta name="description" content="Universal Birthday Wish Template">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Caveat&display=swap');

        :root {
            --tombol-bg: rgba(0, 0, 0, .3);
            --tombol-teks: #fff;
            --tombol-bingkai: #fff;
            --bingkai: 8px;
            --bingkai-kiri: 1.3px solid var(--tombol-bingkai);
            --bingkai-kanan: 1.3px solid var(--tombol-bingkai);
            --gaya-font: 'Shippori Antique', sans-serif;
            --gaya-font2: 'Dancing Script', sans-serif;
            --gaya-font3: 'Caveat', cursive;
        }

        @keyframes fanim {
            0% {
                background-position: 0% 0%;
            }

            25% {
                background-position: 100% 100%;
            }

            50% {
                background-position: 0% 100%;
            }

            75% {
                background-position: 50% 50%;
            }

            100% {
                background-position: 0% 0%;
            }
        }

        body {
            background: radial-gradient(ellipse at top left, #ffd2e6 0%, #ffe3ee 100%);
            font-family: var(--gaya-font);
            padding: 20px 25px;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        a {
            text-decoration: none;
        }

        #bodyblur {
            opacity: 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, .3);
            transition: all 1s ease;
        }

        #wallpaper {
            width: 100%;
            height: 100%;
            transform: scale(2);
            transition: all 1.3s ease;
        }

        #beneranblur {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, .3);
            -webkit-backdrop-filter: blur(0px);
            backdrop-filter: blur(0px);
            transition: all 3s ease;
        }

        blockquote {
            position: absolute;
            opacity: 0;
            visibility: hidden;
            margin-top: 100px;
            background: var(--tombol-bg);
            border-radius: 18px 0 18px 0;
            box-shadow: rgba(255, 255, 255, 0.3) 0px 7px 29px 0px;
            transform: scale(.1);
            transition: all 1s ease;
            margin-top: 120px;
            margin-left: 0;
            margin-right: 0;
            color: var(--tombol-teks);
            text-shadow: 0px 2px 2px rgba(0, 0, 0, .8);
            width: 400px;
            text-align: center;
            line-height: 1.3em;
            padding: 20px;
        }

        blockquote::before {
            content: attr(data-text);
            opacity: .7;
            font-family: sans-serif;
            position: absolute;
            left: 8px;
            top: 8px;
            min-width: 15px;
            font-size: 16px;
            text-align: center
        }

        blockquote::after {
            content: "";
            position: absolute;
            border: 1px solid #fff;
            border-radius: 18px 0 18px 0;
            top: -8px;
            bottom: -8px;
            left: -8px;
            right: -8px;
        }

        blockquote p {
            font-size: 16px;
            font-weight: 700;
            line-height: 1.4em;
            transition: all .5s ease;
        }

        blockquote>.gaya2 {
            font-size: 15px;
            font-weight: 400
        }

        blockquote>#pesan3 {
            position: absolute;
            opacity: 0;
            transform: scale(.1);
            transition: all .7s ease;
        }

        blockquote>#pesan5,
        blockquote>#pesan8 {
            margin-top: 25px
        }

        blockquote p:not(#opsL, #kalimat, #pesan3, .gaya2) {
            display: none;
        }

        blockquote>#opsL {
            text-align: right;
            font-size: 11px;
            font-weight: 400;
            line-height: 0;
            margin-top: 24px;
            color: white;
            opacity: 0;
            transition: all .2s ease;
        }

        #Tombol {
            position: relative;
            opacity: 0;
            margin: 0;
            display: flex;
            align-items: left;
            list-style: none;
            transform: scale(.1);
            transition: all 1s ease;
        }

        #Tombol a {
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            margin: 0;
            margin: 12px 0 12px 0;
            transition: all .2s ease;
            padding: 10px;
            outline: 0;
            border: 1px solid #fefefeba;
            border-radius: 10px 0 10px 0;
            line-height: 15px;
            background: rgba(0, 0, 0, .5);
            color: var(--tombol-teks);
            font-size: 12px;
            font-weight: 700;
            white-space: nowrap;
            overflow: hidden;
            box-shadow: rgba(255, 255, 255, 0.3) 0px 7px 29px 0px;
            z-index: 1
        }

        #Content {
            animation-name: none;
            animation-duration: 3s;
            animation-iteration-count: infinite;
            position: relative;
            opacity: 0;
            margin-top: 50px;
            width: 100%;
            height: 180px;
            transition: all .7s ease;
        }

        #Content>* {
            display: flex;
            align-items: center;
            text-align: center;
            justify-content: center;
            margin-top: 1px;
        }

        .kumpulanstiker>img {
            display: none;
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 30px rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            padding: 10px;
            width: 100px;
            height: 100px;
            margin: 20px 0;
        }

        #fotostiker {
            opacity: .1;
            transition: all 1.2s ease;
            transform: scale(.1);
        }

        .halo {
            font-size: 18px !important;
            position: relative;
            margin: 15px 0 20px 0
        }

        .halo.gaya2 {
            font-family: var(--gaya-font2);
            font-size: 24px !important;
            margin-top: 20px !important;
        }

        .halo.sty3 {
            position: absolute !important;
            font-size: 14px !important;
            font-weight: 400 !important;
            margin: 30px 20px !important;
        }

        #fotolove img {
            transition: all .5s ease;
            width: 75px;
            height: 75px;
            padding: 0;
            background: none
        }

        #kadoIn img {
            display: inline-flex;
            background: none;
            width: 130px;
            height: 130px;
            transition: all .3s ease;
        }

        #ket,
        .halo {
            text-shadow: 0px 2px 2px rgba(0, 0, 0, .8);
            font-size: 17px;
            font-weight: 700;
            color: white
        }

        #ket {
            margin-top: 25px !important;
            font-weight: 400;
        }

        #kadoIn img:hover {
            transform: scale(.9);
        }

        #kolombaru {
            position: absolute;
            opacity: 0;
            display: flex;
            transform: scale(.1);
            transition: all 1s ease;
            align-items: center;
            text-align: center;
            justify-content: center;
            z-index: 1;
        }

        #kolombaru>li {
            margin: 8px;
            padding: 0;
            list-style-type: none;
        }

        #kolombaru li {
            opacity: .8;
            display: flex;
            font-size: 30px
        }

        #kolombaru li:hover {
            opacity: .5;
            transform: scale(1.15);
            transition: all .3s ease;
        }

        /* --- NEW: Custom Message Box --- */
        #custom-message-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        #custom-message-label {
            color: #d6336c;
            margin-bottom: 6px;
            font-size: 17px;
            font-family: var(--gaya-font2);
        }
        #custom-message-input {
            width: 350px;
            max-width: 85vw;
            padding: 10px 16px;
            font-size: 17px;
            border-radius: 10px;
            border: 2px solid #d6336c;
            margin-bottom: 0;
            margin-top: 0;
        }

        .sembunyi,
        #pesanditolak>*,
        #kado2,
        #kado3 {
            display: none !important
        }
    </style>
</head>

<body>

    <!-- Ganti Audio di sini -->
    <audio src="" id="linkmp3" class="sembunyi"></audio>

    <div id="bodyblur">
        <!-- Wallpaper --><img src="./assets/wp.jpg" id="wallpaper" />
        <div id="beneranblur"></div>
    </div>

    <div id='Content'>
        <div id="kadoIn">
            <!-- Tombol Surat --><img src="./assets/kadoin.png" />
        </div>
        <p id="ket">Click the Gift!</p>

        <div class="kumpulanstiker">
            <!-- Stiker untuk Konten -->
            <img src="./assets/bunga.gif" id="fotostiker" />
            <img src="./assets/pusn.gif" id="fotostiker1" />
            <img src="./assets/pandacoklat.gif" id="fotostiker2" />
            <img src="./assets/cilukba.gif" id="fotostiker3" />
            <img src="./assets/pandakuning.gif" id="fotostiker4" />
            <img src="./assets/emawh.gif" id="fotostiker5" />
            <img src="./assets/pandacoklat.gif" id="fotostiker6" />
        </div>

        <p id="halo" class="halo"></p>

        <!-- Custom Message -->
        <div id="custom-message-container">
            <label id="custom-message-label" for="custom-message-input">Add your own birthday message:</label>
            <input id="custom-message-input" type="text" maxlength="120" placeholder="Type your birthday wish here..." />
        </div>

        <div>
            <blockquote id='bq' data-text='&#10084;'>
                <p id="kalimat">I have something special for you, turn up the volume! &#10084;</p>

                <p id="pesan1">Tap here for your birthday surprise! 🎉&#10084;</p>
                <div id="kolombaru">
                        <li id="lv1">🎂</li>
                        <li id="lv2">🎁</li>
                        <li id="lv3">🥳</li>
                        <li id="lv4">💖</li>
                </div>

                <p id="pesan2">Wait...</p>
                <!-- Pesan -->
                <p id="pesan3">Hey... it's your birthday! 🎉</p>
                <p id="pesan4">Happy Birthday!</p>
                <p id="pesan5" class="gaya2">Wishing you a fantastic year ahead.</p>
                <p id="pesan6" class="gaya2">May your days be filled with happiness and laughter!</p>
                <p id="pesan7" class="gaya2">Enjoy every moment and make great memories.</p>

                <p id="pesan8" class="gaya2">Celebrate YOU today!</p>
                <p id="pesan9" class="gaya2">Hope you’re happy on your special day. You deserve it!</p>
                <p id="pesan10" class="gaya2">Thank you for making everyone’s lives brighter. 🎂</p>
                <p id="custom-message-output" class="gaya2"></p>
                <!-- Tombol Lanjut -->
                <p id="opsL">Click to Continue</p>
            </blockquote>
        </div>

        <!-- Tombol Kirim Pesan -->
        <div id="Tombol"><a id="By">&#128140; Continue</a></div>

        <!-- Pesan Tambahan -->
        <p id="katatambahan" class="sembunyi">Just Kidding Heheheh 😂</p>

        <!-- Pesan Ditolak -->
        <div id="pesanditolak">
            <img id="stikerditolak" src="./assets/weee.gif" />
            <p id="kataditolak">Just Kidding Heheheh 😂</p>
        </div>
    </div>

    <script>
        // All your original JS logic preserved, just tweaked for custom message
        const body = document.querySelector("body");
        const swalst = Swal.mixin({ timer: 2300, allowOutsideClick: false, showConfirmButton: false, timerProgressBar: true, imageHeight: 90, });
        audio = new Audio('' + linkmp3.src); ftganti = 0; fungsi = 0; fungsiAwal = 0; deffotostiker = fotostiker.src;
        function berjatuhan() {
            const heart = document.createElement("div");
            heart.className = "fas fa-snowflake";
            heart.style.left = (Math.random() * 90) + "vw";
            heart.style.animationDuration = (Math.random() * 3) + 2 + "s";
            body.appendChild(heart);
        }
        setInterval(function name(params) {
            var heartArr = document.querySelectorAll(".fa-snowflake");
            if (heartArr.length > 100) { heartArr[0].remove() }
        }, 100);

        Content.style = "opacity:1;margin-top:16vh";
        const swals = Swal.mixin({ allowOutsideClick: false, cancelButtonColor: '#FF0040', imageHeight: 80, });

        document.getElementById("kadoIn").onclick = function () {
            if (fungsiAwal == 0) {
                audio.play(); fungsiAwal = 1;
                kadoIn.style = "transition:all .30s ease;transform:scale(10);opacity:0";
                wallpaper.style = "transform: scale(1.6);";
                ket.style = "display:none";
                setTimeout(initengahan, 500); setTimeout(inipesan, 500)
            }
        }

        async function inipesan() {
            var { value: nama } = await swals.fire({
                title: 'Who is this wish for?',
                input: 'text',
                confirmButtonText: 'Continue',
                showCancelButton: false,
            });
            if (nama && nama.length < 21) {
                window.nama = nama;
                vketikhalo = "Hi, " + nama + " &#10084;";
                await swals.fire('Hi, ' + nama + ' ツ');
                await swals.fire('It\'s your birthday today!');
                await swals.fire('Wishing you a wonderful year ahead!');
                pilihwarna();
            } else {
                await swals.fire('Oops!', 'Name cannot
